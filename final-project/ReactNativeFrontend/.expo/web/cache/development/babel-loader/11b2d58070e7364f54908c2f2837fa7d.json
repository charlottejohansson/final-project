{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport React, { useEffect } from \"react\";\nimport { useDispatch, useSelector, Provider } from \"react-redux\";\nimport profiles from \"../reducers/profiles.js\";\nimport { API_URL } from \"../utils/utils\";\nimport { useNavigate, Link } from \"react-router-native\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport { Colors, Typography, Containers } from \"../styles\";\nimport { Heading } from \"../styles/heading\";\nimport { PrimaryBtn } from \"../styles/buttons\";\nimport user from \"../reducers/user\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar ProfilePage = function ProfilePage() {\n  var profilesItems = useSelector(function (store) {\n    return store.profiles.items;\n  });\n  var dispatch = useDispatch();\n  var accessToken = useSelector(function (store) {\n    return store.user.accessToken;\n  });\n  var navigate = useNavigate();\n  useEffect(function () {\n    if (!accessToken) {\n      navigate(\"/login\");\n    }\n  }, []);\n  useEffect(function () {\n    var options = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": accessToken\n      }\n    };\n    fetch(API_URL(\"profiles\"), options).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      if (data.success) {\n        dispatch(profiles.actions.setItems(data.response));\n        dispatch(profiles.actions.setError(null));\n      } else {\n        dispatch(profiles.actions.setItems([]));\n        dispatch(profiles.actions.setError(data.response));\n      }\n    });\n  }, []);\n  return _jsxs(View, {\n    style: _objectSpread({}, Containers.outerContainer),\n    children: [_jsx(Heading, {}), _jsxs(View, {\n      style: styles.container,\n      children: [_jsx(Text, {\n        style: styles.text,\n        children: \"ProfilePage - it's working!\"\n      }), _jsx(PrimaryBtn, {\n        title: \"Sign out\",\n        onPress: function onPress() {\n          navigate(\"/\");\n          dispatch(user.actions.setAccessToken(null));\n        },\n        type: \"submit\"\n      })]\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: _objectSpread(_objectSpread({}, Containers.outerContainer), {}, {\n    justifyContent: \"center\"\n  }),\n  text: _objectSpread(_objectSpread({}, Typography.body2), {}, {\n    color: Colors.palette.lavenderBlush\n  }),\n  textInput: {\n    color: Colors.palette.lavenderBlush\n  }\n});\nexport default ProfilePage;","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","Provider","profiles","API_URL","useNavigate","Link","Colors","Typography","Containers","Heading","PrimaryBtn","user","ProfilePage","profilesItems","store","items","dispatch","accessToken","navigate","options","method","headers","fetch","then","res","json","data","success","actions","setItems","response","setError","outerContainer","styles","container","text","setAccessToken","StyleSheet","create","justifyContent","body2","color","palette","lavenderBlush","textInput"],"sources":["/Users/charlottejohansson/Desktop/final-project/final-project/ReactNativeFrontend/components/ProfilePage.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector, Provider } from \"react-redux\";\nimport profiles from \"../reducers/profiles.js\";\nimport { API_URL } from '../utils/utils'\nimport { useNavigate, Link } from \"react-router-native\";\nimport { StyleSheet, Text, View, Button } from \"react-native\";\nimport { Colors, Typography, Containers } from '../styles'\nimport { Heading } from '../styles/heading'\nimport { PrimaryBtn} from \"../styles/buttons\";\nimport user from '../reducers/user';\n\n\nconst ProfilePage = () => {\n\n    const profilesItems = useSelector((store) => store.profiles.items);\n    const dispatch = useDispatch();\n    const accessToken = useSelector((store) => store.user.accessToken);\n    const navigate = useNavigate();\n\n    useEffect( () => {\n        if (!accessToken) {\n            navigate(\"/login\");\n        }\n    }, []);\n    \n    useEffect(() => {\n        const options = {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": accessToken\n            }\n        }\n\n        fetch(API_URL(\"profiles\"), options)\n            .then(res => res.json())\n            .then(data => {\n                if(data.success) {\n                    dispatch(profiles.actions.setItems(data.response));\n                    dispatch(profiles.actions.setError(null));\n                } else {\n                    dispatch(profiles.actions.setItems([]));\n                    dispatch(profiles.actions.setError(data.response));\n                }\n            })\n    }, []);\n\n    return (\n        <View style={{...Containers.outerContainer}}>\n            <Heading/>\n            <View style={styles.container}>\n                <Text style={styles.text}>ProfilePage - it's working!</Text>\n                <PrimaryBtn \n                    title=\"Sign out\"\n                    onPress={() => { navigate(\"/\"); dispatch(user.actions.setAccessToken(null));}} //doesn't work to sign in again, you need to reload the page\n                    type=\"submit\"\n                />\n            </View>\n        </View>\n\n    );\n}\n\nconst styles = StyleSheet.create({\n    container: {\n      ...Containers.outerContainer,\n      justifyContent: \"center\",\n    },\n  \n    text: {\n      ...Typography.body2,\n      color: Colors.palette.lavenderBlush,\n    },\n  \n    textInput: {\n      color: Colors.palette.lavenderBlush,\n    }\n});\n\n\nexport default ProfilePage;"],"mappings":"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"},"metadata":{},"sourceType":"module"}