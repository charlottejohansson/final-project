{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport React, { useEffect, useState, createRef } from \"react\";\nimport { useDispatch, useSelector, batch } from \"react-redux\";\nimport { useNavigate, Link } from \"react-router-native\";\nimport { API_URL } from \"../utils/utils\";\nimport user from \"../reducers/user\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { Typography, Containers, Colors } from \"../styles\";\nimport { PrimaryBtn } from \"../styles/buttons\";\nimport { InputField } from \"../styles/inputfield\";\nimport { Heading } from \"../styles/heading\";\nimport { spacing } from \"../styles/spacing\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Login = function Login() {\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    username = _useState2[0],\n    setUsername = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    password = _useState4[0],\n    setPassword = _useState4[1];\n  var _useState5 = useState(\"login\"),\n    _useState6 = _slicedToArray(_useState5, 2),\n    mode = _useState6[0],\n    setMode = _useState6[1];\n  var _useState7 = useState(null),\n    _useState8 = _slicedToArray(_useState7, 2),\n    error = _useState8[0],\n    setError = _useState8[1];\n  var dispatch = useDispatch();\n  var navigate = useNavigate();\n  var accessToken = useSelector(function (store) {\n    return store.user.accessToken;\n  });\n  useEffect(function () {\n    if (accessToken) {\n      navigate(\"/main\");\n    }\n  }, [accessToken]);\n  var passwordInputRef = createRef();\n  var onFormSubmit = function onFormSubmit(event) {\n    event.preventDefault();\n    var options = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        username: username,\n        password: password\n      })\n    };\n    fetch(API_URL(mode), options).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      if (data.success) {\n        batch(function () {\n          dispatch(user.actions.setUsername(data.response.username));\n          dispatch(user.actions.setUserId(data.response.id));\n          dispatch(user.actions.setAccessToken(data.response.accessToken));\n          dispatch(user.actions.setError(null));\n        });\n      } else {\n        alert(\"error, could not find user - make sure you've registered and that the password is correct \");\n        batch(function () {\n          dispatch(user.actions.setUsername(null));\n          dispatch(user.actions.setUserId(null));\n          dispatch(user.actions.setAccessToken(null));\n          dispatch(user.actions.setError(data.response));\n        });\n      }\n    });\n  };\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Heading, {}), _jsx(View, {\n      style: styles.container,\n      onPress: onFormSubmit,\n      children: _jsxs(View, {\n        style: styles.innerWrapper,\n        children: [_jsx(Text, {\n          style: styles.h2,\n          children: \"Login\"\n        }), _jsx(InputField, {\n          placeholder: \"Username\",\n          onChangeText: setUsername,\n          value: username,\n          autoCapitalize: \"none\",\n          returnKeyType: \"next\",\n          blurOnSubmit: false,\n          onSubmitEditing: function onSubmitEditing() {\n            return passwordInputRef.current && passwordInputRef.current.focus();\n          }\n        }), _jsx(InputField, {\n          placeholder: \"Password\",\n          ref: passwordInputRef,\n          blurOnSubmit: false,\n          secureTextEntry: true,\n          textContentType: password,\n          onChangeText: setPassword,\n          returnKeyType: \"next\"\n        }), _jsx(PrimaryBtn, {\n          title: \"Login\",\n          onPress: onFormSubmit,\n          type: \"submit\"\n        }), _jsxs(Text, {\n          style: styles.text,\n          children: [\"Don't have an account?\", _jsx(Link, {\n            to: \"/register\",\n            children: _jsx(Text, {\n              style: styles.linkText,\n              children: \"Sign up here\"\n            })\n          })]\n        })]\n      })\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: _objectSpread(_objectSpread({}, Containers.outerContainer), {}, {\n    justifyContent: \"center\"\n  }),\n  h2: _objectSpread(_objectSpread({}, Typography.h2), {}, {\n    color: Colors.palette.lavenderBlush,\n    paddingBottom: spacing.XS\n  }),\n  text: _objectSpread(_objectSpread({}, Typography.body2), {}, {\n    color: Colors.palette.lavenderBlush,\n    textAlign: \"center\"\n  }),\n  linkText: _objectSpread(_objectSpread({}, Typography.body2), {}, {\n    color: Colors.palette.frostbite,\n    paddingTop: 2,\n    paddingLeft: 4\n  }),\n  innerWrapper: {\n    width: \"100%\",\n    alignContent: \"flex-start\"\n  }\n});\nexport default Login;","map":{"version":3,"names":["React","useEffect","useState","createRef","useDispatch","useSelector","batch","useNavigate","Link","API_URL","user","Typography","Containers","Colors","PrimaryBtn","InputField","Heading","spacing","Login","username","setUsername","password","setPassword","mode","setMode","error","setError","dispatch","navigate","accessToken","store","passwordInputRef","onFormSubmit","event","preventDefault","options","method","headers","body","JSON","stringify","fetch","then","response","json","data","success","actions","setUserId","id","setAccessToken","alert","styles","container","innerWrapper","h2","current","focus","text","linkText","StyleSheet","create","outerContainer","justifyContent","color","palette","lavenderBlush","paddingBottom","XS","body2","textAlign","frostbite","paddingTop","paddingLeft","width","alignContent"],"sources":["/Users/charlottejohansson/Desktop/final-project/final-project/ReactNativeFrontend/components/Login.js"],"sourcesContent":["import React, {useEffect, useState, createRef} from \"react\";\nimport { useDispatch, useSelector, batch } from \"react-redux\";\nimport { useNavigate, Link } from \"react-router-native\";\nimport { API_URL } from '../utils/utils'\nimport user from '../reducers/user';\n\nimport { StyleSheet, Text, View } from \"react-native\";\nimport { Typography, Containers, Colors } from '../styles'\nimport { PrimaryBtn } from \"../styles/buttons\";\nimport { InputField } from \"../styles/inputfield\";\nimport { Heading } from \"../styles/heading\";\nimport { spacing } from \"../styles/spacing\";\n\nconst Login = () => {\n    const [username, setUsername] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [mode, setMode] = useState(\"login\");\n    const [error, setError] = useState(null);\n    const dispatch = useDispatch();\n    const navigate = useNavigate();\n    const accessToken = useSelector((store) => store.user.accessToken);\n    useEffect(() => {\n        if (accessToken) {\n            navigate(\"/main\");\n        }\n    }, [accessToken])\n\n    const passwordInputRef = createRef(); \n\n    const onFormSubmit =(event) => {\n        event.preventDefault();\n        const options = {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({username: username, password: password })\n        }\n        \n        fetch(API_URL(mode), options)\n            .then(response => response.json())\n            .then(data => {\n                if(data.success) {\n                    batch(()=> {\n                        dispatch(user.actions.setUsername(data.response.username));\n                        dispatch(user.actions.setUserId(data.response.id))\n                        dispatch(user.actions.setAccessToken(data.response.accessToken));\n                        dispatch(user.actions.setError(null));\n                    });\n                } else {\n                    alert(\"error, could not find user - make sure you've registered and that the password is correct \");\n                    batch (() => {\n                        dispatch(user.actions.setUsername(null));\n                        dispatch(user.actions.setUserId(null))\n                        dispatch(user.actions.setAccessToken(null));\n                        dispatch(user.actions.setError(data.response));\n                    });\n                }\n            })\n    }\n    \n    return (   \n        <View style={styles.container}>\n            <Heading/> \n            <View style={styles.container} onPress={(onFormSubmit)}>\n                <View style={styles.innerWrapper}>\n                    <Text style={styles.h2}>Login</Text>\n                    <InputField\n                        placeholder=\"Username\" \n                        onChangeText={setUsername}\n                        value={username}\n                        autoCapitalize=\"none\" \n                        returnKeyType=\"next\" \n                        blurOnSubmit={false}\n                        onSubmitEditing={() => passwordInputRef.current &&  passwordInputRef.current.focus()} // meaning?\n                    />\n                    <InputField \n                        placeholder=\"Password\" \n                        ref={passwordInputRef}\n                        blurOnSubmit={false}\n                        secureTextEntry={true}\n                        textContentType={password}\n                        onChangeText={setPassword}\n                        returnKeyType=\"next\"\n                    />\n                    <PrimaryBtn \n                        title=\"Login\"\n                        onPress={(onFormSubmit)}\n                        type=\"submit\"\n                    />\n                    <Text style={styles.text}>Don't have an account?\n                        <Link to='/register'>\n                            <Text style={styles.linkText}>Sign up here</Text>\n                        </Link>\n                    </Text>\n                </View>\n            </View>\n        </View>\n        \n    )\n}\nconst styles = StyleSheet.create({\n    container: {\n        ...Containers.outerContainer,\n        justifyContent: \"center\",\n    },\n\n    h2: {\n        ...Typography.h2,\n        color: Colors.palette.lavenderBlush,\n        paddingBottom: spacing.XS,\n    },\n  \n    text: {\n        ...Typography.body2,\n        color: Colors.palette.lavenderBlush,\n        textAlign: \"center\",\n    },\n\n    linkText: {\n        ...Typography.body2,\n        color: Colors.palette.frostbite,\n        paddingTop: 2,\n        paddingLeft: 4,\n    },\n\n    innerWrapper: {\n        width: \"100%\",\n        alignContent: \"flex-start\"\n    }\n});\n\nexport default Login;\n\n\n\n  \n"],"mappings":"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"},"metadata":{},"sourceType":"module"}