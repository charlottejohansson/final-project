{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport profiles from \"../reducers/profiles.js\";\nimport { API_URL } from \"../utils/utils\";\nimport { useNavigate, Link } from \"react-router-native\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport { Colors, Typography, Containers } from \"../styles\";\nimport { PrimaryBtn, SecondaryBtn } from \"../styles/buttons\";\nimport user from \"../reducers/user\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar ProfilePage = function ProfilePage() {\n  var profilesItems = useSelector(function (store) {\n    return store.profiles.items;\n  });\n  var dispatch = useDispatch();\n  var accessToken = useSelector(function (store) {\n    return store.user.accessToken;\n  });\n  var navigate = useNavigate();\n  useEffect(function () {\n    if (!accessToken) {\n      navigate(\"/login\");\n    }\n  }, []);\n  useEffect(function () {\n    var options = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": accessToken\n      }\n    };\n    fetch(API_URL(\"profiles\"), options).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      if (data.success) {\n        dispatch(profiles.actions.setItems(data.response));\n        dispatch(profiles.actions.setError(null));\n      } else {\n        dispatch(profiles.actions.setItems([]));\n        dispatch(profiles.actions.setError(data.response));\n      }\n    });\n  }, []);\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      style: styles.text,\n      children: \"ProfilePage - it's working!\"\n    }), _jsx(Button, {\n      title: \"Sign out\",\n      onPress: function onPress() {\n        navigate(\"/\");\n        dispatch(user.actions.setAccessToken(null));\n      },\n      type: \"submit\"\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: _objectSpread({}, Containers.outerContainer),\n  text: _objectSpread(_objectSpread({}, Typography.body2), {}, {\n    color: Colors.palette.lavenderBlush\n  }),\n  textInput: {\n    color: Colors.palette.lavenderBlush\n  }\n});\nexport default ProfilePage;","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","profiles","API_URL","useNavigate","Link","Colors","Typography","Containers","PrimaryBtn","SecondaryBtn","user","ProfilePage","profilesItems","store","items","dispatch","accessToken","navigate","options","method","headers","fetch","then","res","json","data","success","actions","setItems","response","setError","styles","container","text","setAccessToken","StyleSheet","create","outerContainer","body2","color","palette","lavenderBlush","textInput"],"sources":["/Users/charlottejohansson/Desktop/final-project/final-project/ReactNativeFrontend/components/ProfilePage.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport profiles from \"../reducers/profiles.js\";\nimport { API_URL } from '../utils/utils'\nimport { useNavigate, Link } from \"react-router-native\";\nimport { StyleSheet, Text, View, Button } from \"react-native\";\nimport { Colors, Typography, Containers } from '../styles'\nimport { PrimaryBtn, SecondaryBtn } from \"../styles/buttons\";\nimport user from '../reducers/user';\n\nconst ProfilePage = () => {\n    const profilesItems = useSelector((store) => store.profiles.items);\n    const dispatch = useDispatch();\n    const accessToken = useSelector((store) => store.user.accessToken);\n    const navigate = useNavigate();\n\n    useEffect( () => {\n        if (!accessToken) {\n            navigate(\"/login\");\n        }\n    }, []);\n    \n    useEffect(() => {\n        const options = {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": accessToken\n            }\n        }\n\n        fetch(API_URL(\"profiles\"), options)\n            .then(res => res.json())\n            .then(data => {\n                if(data.success) {\n                    dispatch(profiles.actions.setItems(data.response));\n                    dispatch(profiles.actions.setError(null));\n                } else {\n                    dispatch(profiles.actions.setItems([]));\n                    dispatch(profiles.actions.setError(data.response));\n                }\n            })\n    }, []);\n\n    return (\n        <View style={styles.container}>\n            <Text style={styles.text}>ProfilePage - it's working!</Text>\n            <Button \n                title=\"Sign out\"\n                onPress={() => { navigate(\"/\"); dispatch(user.actions.setAccessToken(null));}} //doesn't work to sign in again, you need to reload the page\n                type=\"submit\"\n            />\n        </View>\n    );\n}\n\nconst styles = StyleSheet.create({\n    container: {\n      ...Containers.outerContainer,\n    },\n  \n    text: {\n      ...Typography.body2,\n      color: Colors.palette.lavenderBlush,\n    },\n  \n    textInput: {\n      color: Colors.palette.lavenderBlush,\n    }\n});\n\n\nexport default ProfilePage;"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,OAAOC,QAAQ;AACf,SAASC,OAAO;AAChB,SAASC,WAAW,EAAEC,IAAI,QAAQ,qBAAqB;AAAC;AAAA;AAAA;AAAA;AAExD,SAASC,MAAM,EAAEC,UAAU,EAAEC,UAAU;AACvC,SAASC,UAAU,EAAEC,YAAY;AACjC,OAAOC,IAAI;AAAyB;AAAA;AAEpC,IAAMC,WAAW,GAAG,SAAdA,WAAW,GAAS;EACtB,IAAMC,aAAa,GAAGZ,WAAW,CAAC,UAACa,KAAK;IAAA,OAAKA,KAAK,CAACZ,QAAQ,CAACa,KAAK;EAAA,EAAC;EAClE,IAAMC,QAAQ,GAAGhB,WAAW,EAAE;EAC9B,IAAMiB,WAAW,GAAGhB,WAAW,CAAC,UAACa,KAAK;IAAA,OAAKA,KAAK,CAACH,IAAI,CAACM,WAAW;EAAA,EAAC;EAClE,IAAMC,QAAQ,GAAGd,WAAW,EAAE;EAE9BL,SAAS,CAAE,YAAM;IACb,IAAI,CAACkB,WAAW,EAAE;MACdC,QAAQ,CAAC,QAAQ,CAAC;IACtB;EACJ,CAAC,EAAE,EAAE,CAAC;EAENnB,SAAS,CAAC,YAAM;IACZ,IAAMoB,OAAO,GAAG;MACZC,MAAM,EAAE,KAAK;MACbC,OAAO,EAAE;QACL,cAAc,EAAE,kBAAkB;QAClC,eAAe,EAAEJ;MACrB;IACJ,CAAC;IAEDK,KAAK,CAACnB,OAAO,CAAC,UAAU,CAAC,EAAEgB,OAAO,CAAC,CAC9BI,IAAI,CAAC,UAAAC,GAAG;MAAA,OAAIA,GAAG,CAACC,IAAI,EAAE;IAAA,EAAC,CACvBF,IAAI,CAAC,UAAAG,IAAI,EAAI;MACV,IAAGA,IAAI,CAACC,OAAO,EAAE;QACbX,QAAQ,CAACd,QAAQ,CAAC0B,OAAO,CAACC,QAAQ,CAACH,IAAI,CAACI,QAAQ,CAAC,CAAC;QAClDd,QAAQ,CAACd,QAAQ,CAAC0B,OAAO,CAACG,QAAQ,CAAC,IAAI,CAAC,CAAC;MAC7C,CAAC,MAAM;QACHf,QAAQ,CAACd,QAAQ,CAAC0B,OAAO,CAACC,QAAQ,CAAC,EAAE,CAAC,CAAC;QACvCb,QAAQ,CAACd,QAAQ,CAAC0B,OAAO,CAACG,QAAQ,CAACL,IAAI,CAACI,QAAQ,CAAC,CAAC;MACtD;IACJ,CAAC,CAAC;EACV,CAAC,EAAE,EAAE,CAAC;EAEN,OACI,MAAC,IAAI;IAAC,KAAK,EAAEE,MAAM,CAACC,SAAU;IAAA,WAC1B,KAAC,IAAI;MAAC,KAAK,EAAED,MAAM,CAACE,IAAK;MAAA;IAAA,EAAmC,EAC5D,KAAC,MAAM;MACH,KAAK,EAAC,UAAU;MAChB,OAAO,EAAE,mBAAM;QAAEhB,QAAQ,CAAC,GAAG,CAAC;QAAEF,QAAQ,CAACL,IAAI,CAACiB,OAAO,CAACO,cAAc,CAAC,IAAI,CAAC,CAAC;MAAC,CAAE;MAC9E,IAAI,EAAC;IAAQ,EACf;EAAA,EACC;AAEf,CAAC;AAED,IAAMH,MAAM,GAAGI,UAAU,CAACC,MAAM,CAAC;EAC7BJ,SAAS,oBACJzB,UAAU,CAAC8B,cAAc,CAC7B;EAEDJ,IAAI,kCACC3B,UAAU,CAACgC,KAAK;IACnBC,KAAK,EAAElC,MAAM,CAACmC,OAAO,CAACC;EAAa,EACpC;EAEDC,SAAS,EAAE;IACTH,KAAK,EAAElC,MAAM,CAACmC,OAAO,CAACC;EACxB;AACJ,CAAC,CAAC;AAGF,eAAe9B,WAAW"},"metadata":{},"sourceType":"module"}